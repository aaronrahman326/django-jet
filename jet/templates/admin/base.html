{% extends "admin/base.html" %}
{% load i18n static jet_tags %}

{% block extrastyle %}
    {{ block.super }}
    {% get_current_jet_version as JET_VERSION %}
    <link rel="stylesheet" type="text/css" href="{% static "jet/css/vendor.css" %}?v={{ JET_VERSION }}" />
    <link rel="stylesheet" type="text/css" href="{% static "jet/css/icons/style.css" %}?v={{ JET_VERSION }}" />
    <link rel="stylesheet" type="text/css" href="{% static "jet/css/themes/default/base.css" %}?v={{ JET_VERSION }}" />
    <link rel="stylesheet" type="text/css" href="{% static "jet/css/themes/default/jquery-ui.theme.css" %}?v={{ JET_VERSION }}" />
    <link rel="stylesheet" type="text/css" href="{% static "jet/css/themes/default/select2.theme.css" %}?v={{ JET_VERSION }}" />
{% endblock %}

{% block extrahead %}
    {{ block.super }}
     <script type="text/javascript" charset="utf-8">
        var DATE_FORMAT = "{% get_date_format %}";
        var TIME_FORMAT = "{% get_time_format %}";
        var DATETIME_FORMAT = "{% get_datetime_format %}";
    </script>
    <script src="{% static "jet/js/build/bundle.min.js" %}"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
{% endblock %}

{% block footer %}
    {{ block.super }}

    {% jet_delete_confirmation_context %}

    {% jet_change_form_sibling_links_enabled as show_siblings %}
    {% if change and show_siblings %}
        <div class="changeform-navigation">
            {% spaceless %}
                {% jet_previous_object_url as url %}
                <a{% if url %} href="{{ url }}"{% endif %} class="segmented-button left{% if not url %} disabled{% endif %}">
                    <span class="changeform-navigation-button icon-arrow-left"></span>
                </a>

                {% jet_next_object_url as url %}
                <a{% if url %} href="{{ url }}"{% endif %} class="segmented-button right{% if not url %} disabled{% endif %}">
                    <span class="changeform-navigation-button icon-arrow-right"></span>
                </a>
            {% endspaceless %}
        </div>
    {% endif %}

    {% get_side_menu_compact as SIDE_MENU_COMPACT %}
    {% if not is_popup %}
        <div class="related-popup-container">
            <a href="#" class="related-popup-back"><span class="related-popup-back-icon icon-arrow-left"></span> <span class="related-popup-back-label">{% trans "back" %}</span></a>
            <span class="icon-refresh loading-indicator"></span>
        </div>
        <div class="sidebar">
            <div class="sidebar-menu-wrapper">
                <div id="branding">
                    {% block branding %}{% endblock %}
                </div>
                <ul class="sidebar-menu">
                    <li class="sidebar-menu-item no-horizontal-padding">
                        <ul class="sidebar-menu-item-list compact">
                            {% if user.is_active and user.is_staff %}
                                <li class="sidebar-menu-item-list-item">
                                    <a href="{% url 'admin:index' %}" class="sidebar-menu-item-list-item-link">
                                        <span class="sidebar-menu-item-list-item-icon icon-data"></span> {% trans 'Home' %}
                                    </a>
                                </li>
                            {% endif %}
                            {% if site_url %}
                                <li class="sidebar-menu-item-list-item">
                                    <a href="{{ site_url }}" class="sidebar-menu-item-list-item-link">
                                        <span class="sidebar-menu-item-list-item-icon icon-open-external"></span> {% trans 'View site' %}
                                    </a>
                                </li>
                            {% endif %}
                            {% url 'django-admindocs-docroot' as docsroot %}
                            {% if docsroot %}
                                <li class="sidebar-menu-item-list-item">
                                    <a href="{{ docsroot }}" class="sidebar-menu-item-list-item-link">
                                        <span class="sidebar-menu-item-list-item-icon icon-book"></span> {% trans 'Documentation' %}
                                    </a>
                                </li>
                            {% endif %}
                            {% block nav-global %}{% endblock %}
                        </ul>
                    </li>

                    {% if user.is_active and user.is_staff %}
                        {% get_menu as app_list %}
                        {% if app_list.apps or app_list.pinned_apps %}
                            <form action="{% url "jet:toggle_application_pin" %}" method="POST" id="toggle-application-pin-form">
                                {% csrf_token %}
                                <input type="hidden" name="app_label">
                            </form>
                            {% if SIDE_MENU_COMPACT %}
                                {% for app in app_list.all_apps %}
                                    <li class="sidebar-menu-item no-horizontal-padding">
                                        <a href="{{ app.app_url }}" class="sidebar-menu-item-link">
                                            {% if app.name != app.app_label|capfirst|escape %}{{ app.name }}{% else %}{% trans app.app_label as app_label %}{{ app_label|capfirst|escape }}{% endif %}
                                        </a>
                                        <ul class="sidebar-menu-item-list">
                                            {% for model in app.models %}
                                                <li class="sidebar-menu-item-list-item">
                                                    {% if model.admin_url %}
                                                        <a href="{{ model.admin_url }}" class="sidebar-menu-item-list-item-link">{{ model.name }}</a>
                                                    {% else %}
                                                        {{ model.name }}
                                                    {% endif %}
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </li>
                                {% endfor %}
                            {% else %}
                                <li class="sidebar-menu-item no-horizontal-padding">
                                    <span class="sidebar-menu-item-title">{% trans 'Applications' %}</span>
                                    <ul class="sidebar-menu-item-list apps-list-pinned">
                                        {% for app in app_list.pinned_apps %}
                                            <li class="sidebar-menu-item-list-item app-item pinned app-{{ app.app_label }}" data-app-label="{{ app.app_label }}">
                                                <a href="{{ app.app_url }}" class="sidebar-menu-item-list-item-link popup-item-link" data-popup-item-id="sidebar-popup-item-{{ app.app_label }}">
                                                    <span class="sidebar-menu-item-list-item-arrow icon-arrow-right"></span>
                                                    <span class="sidebar-menu-item-list-item-link-pin icon-star pin-toggle"></span>
                                                    <span class="sidebar-menu-item-list-item-link-unpin icon-cross pin-toggle"></span>
                                                    {% if app.name != app.app_label|capfirst|escape %}{{ app.name }}{% else %}{% trans app.app_label as app_label %}{{ app_label|capfirst|escape }}{% endif %}
                                                </a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                    <a href="#" class="sidebar-menu-item-action apps-hide"></a>
                                    <ul class="sidebar-menu-item-list apps-list">
                                        {% for app in app_list.apps %}
                                            <li class="sidebar-menu-item-list-item app-item app-{{ app.app_label }}" data-app-label="{{ app.app_label }}">
                                                <a href="{{ app.app_url }}" class="sidebar-menu-item-list-item-link popup-item-link" data-popup-item-id="sidebar-popup-item-{{ app.app_label }}">
                                                    <span class="sidebar-menu-item-list-item-arrow icon-arrow-right"></span>
                                                    <span class="sidebar-menu-item-list-item-link-pin icon-star pin-toggle"></span>
                                                    <span class="sidebar-menu-item-list-item-link-unpin icon-cross pin-toggle"></span>
                                                    {% if app.name != app.app_label|capfirst|escape %}{{ app.name }}{% else %}{% trans app.app_label as app_label %}{{ app_label|capfirst|escape }}{% endif %}
                                                </a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </li>
                            {% endif %}
                        {% endif %}
                        <li class="sidebar-menu-item no-horizontal-padding">
                            <div class="dialog-confirm" id="bookmarks-add-dialog" title="{% trans "Add bookmark" %}">
                                <form action="{% url "jet:add_bookmark" %}" method="POST" id="bookmarks-add-form">
                                    {% csrf_token %}
                                    <p>{% trans "Title" %}:</p>
                                    <input type="text" name="title" class="fill_width">
                                    <p>{% trans "URL" %}:</p>
                                    <input type="text" name="url" class="fill_width">
                                </form>
                            </div>
                            <form action="{% url "jet:remove_bookmark" %}" method="POST" id="bookmarks-remove-form">
                                {% csrf_token %}
                                <input type="hidden" name="id">
                            </form>
                            <div class="dialog-confirm" id="bookmarks-remove-dialog" title="{% trans "Delete bookmark" %}">
                                <p>{% trans "Are you sure want to delete this bookmark?" %}</p>
                            </div>
                            <span class="sidebar-menu-item-title">
                                <a href="#" class="sidebar-menu-item-title-icon bookmarks-add" title="{% trans "Add bookmark" %}"{% if title %} data-title="{{ title }}"{% endif %}><span class="icon-add"></span></a>
                                {% trans 'bookmarks' %}
                            </span>
                            <ul class="sidebar-menu-item-list bookmarks-list">
                                {% get_bookmarks user as bookmarks %}
                                {% for bookmark in bookmarks %}
                                    <li class="sidebar-menu-item-list-item">
                                        <a href="{{ bookmark.url }}" class="sidebar-menu-item-list-item-link">
                                            <span class="sidebar-menu-item-list-item-link-remove bookmarks-remove" data-bookmark-id="{{ bookmark.pk }}">{% trans "Remove" %}</span>
                                            {{ bookmark.title }}
                                        </a>
                                    </li>
                                {% endfor %}
                                <li class="sidebar-menu-item-list-item empty">
                                    <a href="" class="sidebar-menu-item-list-item-link">
                                        <span class="sidebar-menu-item-list-item-link-remove bookmarks-remove">{% trans "Remove" %}</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    {% endif %}
                </ul>
            </div>
            <div class="sidebar-copyright">powered by DJANGO JET</div>
        </div>

        {% if not SIDE_MENU_COMPACT %}
            {% if app_list %}
                <div class="sidebar-popup-container">
                    <div class="sidebar-popup">
                        {% for app in app_list.apps|add:app_list.pinned_apps %}
                            <div class="sidebar-popup-item" id="sidebar-popup-item-{{ app.app_label }}">
                                <div class="sidebar-popup-title">
                                    {% if app.name != app.app_label|capfirst|escape %}{{ app.name }}{% else %}{% trans app.app_label as app_label %}{{ app_label|capfirst|escape }}{% endif %}
                                </div>

                                <input class="sidebar-popup-search" placeholder="Search...">

                                <ul class="sidebar-popup-list">
                                    <li class="sidebar-popup-list-item app-{{ app.app_label }}{{ app.current|yesno:" current," }}">
                                        <a href="{{ app.app_url }}" class="sidebar-popup-list-item-link">{% trans 'Application page' %}</a>
                                    </li>

                                    {% for model in app.models %}
                                        <li class="sidebar-popup-list-item model-{{ model.object_name|lower }}{{ model.current|yesno:" current," }}">
                                            {% if model.admin_url %}
                                                <a href="{{ model.admin_url }}" class="sidebar-popup-list-item-link">{{ model.name }}</a>
                                            {% else %}
                                                {{ model.name }}
                                            {% endif %}
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        {% endif %}
        </div>
    {% endif %}
{% endblock %}